"""
URGENT: Verify Google AI rate limit type
- Per-project (shared across all keys)
- Per-key (independent for each key)
"""

print("ğŸ” GOOGLE AI RATE LIMIT TYPE VERIFICATION")
print("="*70)

print("\nğŸ“‹ QUESTION:")
print("   Vá»›i 11 keys trong CÃ™NG 1 project, rate limit Ä‘Æ°á»£c tÃ­nh:")
print("   A. PER-PROJECT: 5 RPM total (chia sáº» giá»¯a 11 keys)")
print("   B. PER-KEY: 5 RPM Ã— 11 = 55 RPM total (má»—i key Ä‘á»™c láº­p)")

print("\nğŸŒ THEO GOOGLE DOCUMENTATION:")
print("   URL: https://ai.google.dev/gemini-api/docs/rate-limits")
print()
print("   Free tier limits are applied PER PROJECT:")
print("   - gemini-2.5-flash: 5 RPM per PROJECT âš ï¸")
print("   - gemini-2.0-flash: 15 RPM per PROJECT âš ï¸")
print()
print("   Multiple API keys trong CÃ™NG project:")
print("   â†’ Chia sáº» CHUNG rate limit!")
print("   â†’ KhÃ´ng tÄƒng RPM!")

print("\nğŸ”´ IMPACT:")
print("   Náº¿u rate limit lÃ  PER-PROJECT:")
print("   - 11 keys Ã— 5 RPM = 5 RPM (NOT 55 RPM!)")
print("   - Optimal threads: 4 (NOT 44!)")
print("   - Multiple keys CHá»ˆ Ä‘á»ƒ:")
print("     â€¢ Failover khi 1 key lá»—i")
print("     â€¢ VÆ°á»£t quota 1 key (RPD)")
print("     â€¢ KHÃ”NG tÄƒng throughput!")

print("\nâœ… SOLUTION:")
print("   Náº¿u muá»‘n 55 RPM:")
print("   â†’ Cáº§n táº¡o 11 PROJECTS khÃ¡c nhau")
print("   â†’ Má»—i project cÃ³ 1 key")
print("   â†’ Má»—i project cÃ³ rate limit riÃªng")

print("\nğŸ§ª TEST RECOMMENDATION:")
print("   Äá»ƒ verify, hÃ£y test:")
print("   1. DÃ¹ng 2 keys tá»« CÃ™NG project")
print("   2. Gá»­i 10 requests Ä‘á»“ng thá»i (5 per key)")
print("   3. Náº¿u PER-PROJECT: Sáº½ bá»‹ rate limit sau 5 requests")
print("   4. Náº¿u PER-KEY: Táº¥t cáº£ 10 requests OK")

print("\n" + "="*70)
print("âš ï¸  USER REPORT:")
print("="*70)
print("   User nÃ³i: 'RPM cá»§a google tÃ­nh theo toÃ n cá»¥c'")
print("   User nghÄ©: '1 phÃºt chá»‰ Ä‘Æ°á»£c gá»­i 4 request vá»›i model 2.5'")
print()
print("   â†’ User cÃ³ thá»ƒ ÄÃšNG!")
print("   â†’ Code hiá»‡n táº¡i giáº£ Ä‘á»‹nh PER-KEY (SAI!)")
print("   â†’ Cáº§n fix NGAY!")
print("="*70)

print("\nğŸ”§ IMMEDIATE ACTION:")
print("   1. Verify vá»›i user: Táº¥t cáº£ 11 keys cÃ³ tá»« CÃ™NG 1 project?")
print("   2. Náº¿u YES â†’ Fix code:")
print("      - Threads = 4 (khÃ´ng nhÃ¢n vá»›i sá»‘ keys)")
print("      - Keys chá»‰ dÃ¹ng Ä‘á»ƒ rotate (failover)")
print("      - Rate limiter: GLOBAL cho táº¥t cáº£ keys")
print("   3. Náº¿u NO (11 projects khÃ¡c nhau) â†’ Code hiá»‡n táº¡i OK")

print("\nğŸ’¡ RECOMMENDED ARCHITECTURE:")
print("   Option 1: Multiple Projects (BEST)")
print("   - 11 Google Cloud projects")
print("   - 1 API key per project")
print("   - Total: 55 RPM âœ…")
print()
print("   Option 2: Single Project (CURRENT)")
print("   - 1 Google Cloud project")
print("   - 11 API keys (same project)")
print("   - Total: 5 RPM âš ï¸")
print("   - Keys only for failover")

print("\nâ“ WAITING FOR USER CONFIRMATION:")
print("   'Táº¥t cáº£ 11 keys cá»§a báº¡n cÃ³ tá»« CÃ™NG 1 project khÃ´ng?'")
print("="*70)
